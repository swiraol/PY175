{% extends "layout.html" %}

{% block content %}
  <h2 class="content-subhead">Search</h2>

  <form action="{{ url_for('search') }}" method="get">
    <input name="query" value="{{ query }}" />
    <button type="submit">Search</button>
  </form>

  {% if matches %}
    <h2>Search Results for "{{ query }}"</h2>
    {% for chapter_name, paragraphs in matches.items() %}
      <h3>{{ chapter_name }}</h3>
      <ul>
        {% for index, paragraph in paragraphs %}
          <li>
            <strong>Paragraph {{ index }}:</strong> {{ paragraph|safe }}
          </li>
        {% endfor %}
      </ul>
    {% endfor %}
  {% else %}
      <p>{{ no_matches_message }}</p>
  {% endif %}
{% endblock %}